{"ast":null,"code":"import _objectSpread from\"/var/www/web-szyper/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from\"react\";import{listContractors}from\"../contractorService\";import{listLedger}from\"../documentService\";import\"./_ledgerList.css\";import{downloadKpirPdf,downloadContractorsXlsx}from\"../reportService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatDatePL(value){if(!value)return\"—\";const d=new Date(value);if(Number.isNaN(d.getTime()))return value;const dd=String(d.getDate()).padStart(2,\"0\");const mm=String(d.getMonth()+1).padStart(2,\"0\");const yyyy=d.getFullYear();return\"\".concat(dd,\".\").concat(mm,\".\").concat(yyyy);}function toFiniteNumberOrNull(v){if(v===null||v===undefined||v===\"\")return null;const n=Number(v);return Number.isFinite(n)?n:null;}function formatMoney(v){const n=toFiniteNumberOrNull(v);return n===null?\"—\":n.toFixed(2);}function unwrapArray(res){if(Array.isArray(res))return res;if(Array.isArray(res===null||res===void 0?void 0:res.data))return res.data;if(Array.isArray(res===null||res===void 0?void 0:res.items))return res.items;return[];}function normalizeLedgerRow(raw){var _ref,_raw$id,_ref2,_raw$ledgerNumber,_ref3,_raw$eventDate,_raw$description,_toFiniteNumberOrNull,_raw$netAmount,_toFiniteNumberOrNull2,_raw$grossAmount;return{id:(_ref=(_raw$id=raw===null||raw===void 0?void 0:raw.id)!==null&&_raw$id!==void 0?_raw$id:raw===null||raw===void 0?void 0:raw.document_id)!==null&&_ref!==void 0?_ref:undefined,ledgerNumber:(_ref2=(_raw$ledgerNumber=raw===null||raw===void 0?void 0:raw.ledgerNumber)!==null&&_raw$ledgerNumber!==void 0?_raw$ledgerNumber:raw===null||raw===void 0?void 0:raw.ledger_number)!==null&&_ref2!==void 0?_ref2:null,eventDate:(_ref3=(_raw$eventDate=raw===null||raw===void 0?void 0:raw.eventDate)!==null&&_raw$eventDate!==void 0?_raw$eventDate:raw===null||raw===void 0?void 0:raw.event_date)!==null&&_ref3!==void 0?_ref3:null,type:raw===null||raw===void 0?void 0:raw.type,description:(_raw$description=raw===null||raw===void 0?void 0:raw.description)!==null&&_raw$description!==void 0?_raw$description:null,netAmount:(_toFiniteNumberOrNull=toFiniteNumberOrNull((_raw$netAmount=raw===null||raw===void 0?void 0:raw.netAmount)!==null&&_raw$netAmount!==void 0?_raw$netAmount:raw===null||raw===void 0?void 0:raw.net_amount))!==null&&_toFiniteNumberOrNull!==void 0?_toFiniteNumberOrNull:null,grossAmount:(_toFiniteNumberOrNull2=toFiniteNumberOrNull((_raw$grossAmount=raw===null||raw===void 0?void 0:raw.grossAmount)!==null&&_raw$grossAmount!==void 0?_raw$grossAmount:raw===null||raw===void 0?void 0:raw.gross_amount))!==null&&_toFiniteNumberOrNull2!==void 0?_toFiniteNumberOrNull2:null};}function ContractorCombobox(props){const{contractors,value,onChange,disabled,loading,placeholder}=props;const selected=value?contractors.find(c=>c.id===value):null;const[open,setOpen]=React.useState(false);const[query,setQuery]=React.useState(\"\");const filtered=React.useMemo(()=>{const q=query.trim().toLowerCase();if(!q)return contractors.slice(0,200);const list=contractors.filter(c=>{var _c$name,_c$taxId;const blob=\"\".concat((_c$name=c.name)!==null&&_c$name!==void 0?_c$name:\"\",\" \").concat((_c$taxId=c.taxId)!==null&&_c$taxId!==void 0?_c$taxId:\"\").toLowerCase();return blob.includes(q);});return list.slice(0,200);},[contractors,query]);const wrapRef=React.useRef(null);React.useEffect(()=>{const onDocClick=e=>{if(!wrapRef.current)return;if(!wrapRef.current.contains(e.target))setOpen(false);};document.addEventListener(\"mousedown\",onDocClick);return()=>document.removeEventListener(\"mousedown\",onDocClick);},[]);const setAll=()=>{onChange(null);setQuery(\"\");setOpen(false);};const pick=id=>{onChange(id);setQuery(\"\");setOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{ref:wrapRef,style:{position:\"relative\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:6},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",value:open?query:selected?\"\".concat(selected.name).concat(selected.taxId?\" (\".concat(selected.taxId,\")\"):\"\"):\"\",placeholder:placeholder!==null&&placeholder!==void 0?placeholder:\"Szukaj kontrahenta (nazwa/NIP) lub zostaw puste = wszyscy\",onChange:e=>{setQuery(e.target.value);if(!open)setOpen(true);},onFocus:()=>setOpen(true),disabled:disabled,\"aria-label\":\"Kontrahent\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--ghost\",type:\"button\",onClick:()=>open?setOpen(false):setOpen(true),disabled:disabled,title:\"Poka\\u017C list\\u0119\",children:\"\\u25BE\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--ghost \".concat(value===null?\"ledger-btn--active\":\"\"),type:\"button\",onClick:setAll,disabled:disabled,title:\"Wszyscy kontrahenci\",children:\"Wszyscy\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-hint\",children:\"\\u0141adowanie kontrahent\\xF3w\\u2026\"})]}),open&&!disabled&&/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-combo\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"ledger-combo-item ledger-combo-item--all\",onClick:setAll,children:\"Wszyscy kontrahenci\"}),filtered.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"ledger-combo-empty\",children:\"Brak wynik\\xF3w.\"}):filtered.map(c=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"ledger-combo-item\",onClick:()=>pick(c.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"ledger-combo-name\",children:c.name}),/*#__PURE__*/_jsx(\"div\",{className:\"ledger-combo-sub\",children:c.taxId?\"NIP: \".concat(c.taxId):\"NIP: —\"})]},c.id)),contractors.length>200&&query.trim()===\"\"&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-combo-hint\",children:\"Pokazuj\\u0119 pierwsze 200. Zacznij pisa\\u0107, aby zaw\\u0119zi\\u0107 list\\u0119.\"})]})]});}export const LedgerList=()=>{const[rows,setRows]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[q,setQ]=useState(\"\");const[reportOpen,setReportOpen]=useState(false);const[reportType,setReportType]=useState(\"kpir\");const[kpirMode,setKpirMode]=useState(\"month\");const[kpirYear,setKpirYear]=useState(new Date().getFullYear());const[kpirMonth,setKpirMonth]=useState(new Date().getMonth()+1);const[kpirQuarter,setKpirQuarter]=useState(Math.floor(new Date().getMonth()/3)+1);const[dateFrom,setDateFrom]=useState(()=>{const d=new Date();d.setDate(1);return d.toISOString().slice(0,10);});const[dateTo,setDateTo]=useState(()=>new Date().toISOString().slice(0,10));const[includeIncome,setIncludeIncome]=useState(true);const[includeCost,setIncludeCost]=useState(true);const[contractors,setContractors]=useState([]);const[contractorsLoading,setContractorsLoading]=useState(false);const[contractorId,setContractorId]=useState(null);const[reportLoading,setReportLoading]=useState(false);const[reportError,setReportError]=useState(null);const load=async()=>{setLoading(true);setError(null);try{const res=await listLedger();const arr=unwrapArray(res);const normalized=arr.map(normalizeLedgerRow);setRows(normalized);}catch(e){console.error(e);setError(\"Nie udało się pobrać księgi (zaksięgowanych dokumentów).\");setRows([]);}finally{setLoading(false);}};const loadContractors=async()=>{setContractorsLoading(true);try{const res=await listContractors();const arr=unwrapArray(res);const normalized=arr.map(c=>{var _ref4,_c$taxId2;return _objectSpread(_objectSpread({},c),{},{taxId:(_ref4=(_c$taxId2=c===null||c===void 0?void 0:c.taxId)!==null&&_c$taxId2!==void 0?_c$taxId2:c===null||c===void 0?void 0:c.tax_id)!==null&&_ref4!==void 0?_ref4:null});});setContractors(normalized);}catch(e){console.error(e);setReportError(\"Nie udało się pobrać listy kontrahentów.\");setContractors([]);}finally{setContractorsLoading(false);}};useEffect(()=>{load();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{if(!reportOpen)return;if(reportType!==\"contractors\")return;loadContractors();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[reportOpen,reportType]);const filtered=useMemo(()=>{const qq=q.trim().toLowerCase();if(!qq)return rows;return rows.filter(r=>{var _r$description;return((_r$description=r.description)!==null&&_r$description!==void 0?_r$description:\"\").toLowerCase().includes(qq);});},[rows,q]);const openReports=()=>{setReportError(null);setReportOpen(true);};const closeReports=()=>{if(reportLoading)return;setReportOpen(false);};const handleDownloadKpir=async()=>{setReportError(null);setReportLoading(true);try{const payload=kpirMode===\"month\"?{mode:\"month\",year:kpirYear,month:kpirMonth}:kpirMode===\"quarter\"?{mode:\"quarter\",year:kpirYear,quarter:kpirQuarter}:{mode:\"year\",year:kpirYear};await downloadKpirPdf(payload);setReportOpen(false);}catch(e){var _e$message;setReportError((_e$message=e===null||e===void 0?void 0:e.message)!==null&&_e$message!==void 0?_e$message:\"Nie udało się wygenerować raportu.\");}finally{setReportLoading(false);}};const handleDownloadContractors=async()=>{setReportError(null);if(!includeIncome&&!includeCost){setReportError(\"Wybierz przynajmniej: Przychody albo Koszty.\");return;}if(!dateFrom||!dateTo){setReportError(\"Wybierz zakres dat.\");return;}setReportLoading(true);try{await downloadContractorsXlsx({dateFrom,dateTo,includeIncome,includeCost,contractorId});setReportOpen(false);}catch(e){var _e$message2;setReportError((_e$message2=e===null||e===void 0?void 0:e.message)!==null&&_e$message2!==void 0?_e$message2:\"Nie udało się wygenerować raportu.\");}finally{setReportLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ksi\\u0119ga\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Zaksi\\u0119gowane dokumenty (BOOKED) z numerem ewidencyjnym.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-toolbar\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",placeholder:\"Szukaj w opisie\\u2026\",value:q,onChange:e=>setQ(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--primary\",type:\"button\",onClick:openReports,disabled:loading,children:\"Raporty\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--ghost\",type:\"button\",onClick:load,disabled:loading,children:\"Od\\u015Bwie\\u017C\"})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-info\",children:\"\\u0141adowanie\\u2026\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-error\",children:error}),!loading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-tablewrap\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"ledger-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nr ewid.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Data zdarzenia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Typ\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Opis\"}),/*#__PURE__*/_jsx(\"th\",{className:\"ledger-th-right\",children:\"Netto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"ledger-th-right\",children:\"Brutto\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filtered.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:6,className:\"ledger-empty\",children:\"Brak pozycji w ksi\\u0119dze.\"})}):filtered.map((r,idx)=>{var _ref5,_r$ledgerNumber,_r$ledgerNumber2,_r$type,_r$description2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:(_r$ledgerNumber2=r.ledgerNumber)!==null&&_r$ledgerNumber2!==void 0?_r$ledgerNumber2:\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:formatDatePL(r.eventDate)}),/*#__PURE__*/_jsx(\"td\",{children:r.type===\"INCOME\"?\"Przychód\":r.type===\"COST\"?\"Koszt\":(_r$type=r.type)!==null&&_r$type!==void 0?_r$type:\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:(_r$description2=r.description)!==null&&_r$description2!==void 0?_r$description2:\"—\"}),/*#__PURE__*/_jsx(\"td\",{className:\"ledger-td-right\",children:formatMoney(r.netAmount)}),/*#__PURE__*/_jsx(\"td\",{className:\"ledger-td-right\",children:formatMoney(r.grossAmount)})]},(_ref5=(_r$ledgerNumber=r.ledgerNumber)!==null&&_r$ledgerNumber!==void 0?_r$ledgerNumber:r.id)!==null&&_ref5!==void 0?_ref5:idx);})})]})}),reportOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-modal-backdrop\",onClick:closeReports,children:/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-modal-head\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Generowanie raportu\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--ghost\",type:\"button\",onClick:closeReports,disabled:reportLoading,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ledger-modal-body\",children:[reportError&&/*#__PURE__*/_jsx(\"div\",{className:\"ledger-error ledger-error--scroll\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"ledger-error-pre\",children:reportError})}),/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Typ raportu\",/*#__PURE__*/_jsxs(\"select\",{className:\"ledger-input\",value:reportType,onChange:e=>{const next=e.target.value;setReportType(next);setReportError(null);if(next===\"contractors\"){loadContractors();}},disabled:reportLoading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"kpir\",children:\"KPiR (PDF)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"contractors\",children:\"Raport kontrahenci (Excel)\"})]})]}),reportType===\"kpir\"?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:10},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Okres\",/*#__PURE__*/_jsxs(\"select\",{className:\"ledger-input\",value:kpirMode,onChange:e=>setKpirMode(e.target.value),disabled:reportLoading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:\"Miesi\\u0105c\"}),/*#__PURE__*/_jsx(\"option\",{value:\"quarter\",children:\"Kwarta\\u0142\"}),/*#__PURE__*/_jsx(\"option\",{value:\"year\",children:\"Rok\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Rok\",/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",type:\"number\",value:kpirYear,onChange:e=>setKpirYear(Number(e.target.value)),min:2000,max:2100,disabled:reportLoading})]}),kpirMode===\"month\"&&/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Miesi\\u0105c\",/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",type:\"number\",value:kpirMonth,onChange:e=>setKpirMonth(Number(e.target.value)),min:1,max:12,disabled:reportLoading})]}),kpirMode===\"quarter\"&&/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Kwarta\\u0142\",/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",type:\"number\",value:kpirQuarter,onChange:e=>setKpirQuarter(Number(e.target.value)),min:1,max:4,disabled:reportLoading})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--primary\",type:\"button\",disabled:reportLoading,onClick:handleDownloadKpir,children:reportLoading?\"Generowanie…\":\"Pobierz PDF\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:10},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Od\",/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",type:\"date\",value:dateFrom,onChange:e=>setDateFrom(e.target.value),disabled:reportLoading})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Do\",/*#__PURE__*/_jsx(\"input\",{className:\"ledger-input\",type:\"date\",value:dateTo,onChange:e=>setDateTo(e.target.value),disabled:reportLoading})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"ledger-label\",children:[\"Kontrahent\",/*#__PURE__*/_jsx(ContractorCombobox,{contractors:contractors,value:contractorId,onChange:setContractorId,disabled:reportLoading,loading:contractorsLoading,placeholder:\"Szukaj (nazwa/NIP)\\u2026 (puste = wszyscy)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checks\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",gap:6,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:includeIncome,onChange:e=>setIncludeIncome(e.target.checked),disabled:reportLoading}),\"Przychody\"]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",gap:6,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:includeCost,onChange:e=>setIncludeCost(e.target.checked),disabled:reportLoading}),\"Koszty\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ledger-btn ledger-btn--primary\",type:\"button\",disabled:reportLoading||!includeIncome&&!includeCost,onClick:handleDownloadContractors,children:reportLoading?\"Generowanie…\":\"Pobierz Excel\"})]})]})]})})]});};","map":{"version":3,"names":["React","useEffect","useMemo","useState","listContractors","listLedger","downloadKpirPdf","downloadContractorsXlsx","jsx","_jsx","jsxs","_jsxs","formatDatePL","value","d","Date","Number","isNaN","getTime","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","concat","toFiniteNumberOrNull","v","undefined","n","isFinite","formatMoney","toFixed","unwrapArray","res","Array","isArray","data","items","normalizeLedgerRow","raw","_ref","_raw$id","_ref2","_raw$ledgerNumber","_ref3","_raw$eventDate","_raw$description","_toFiniteNumberOrNull","_raw$netAmount","_toFiniteNumberOrNull2","_raw$grossAmount","id","document_id","ledgerNumber","ledger_number","eventDate","event_date","type","description","netAmount","net_amount","grossAmount","gross_amount","ContractorCombobox","props","contractors","onChange","disabled","loading","placeholder","selected","find","c","open","setOpen","query","setQuery","filtered","q","trim","toLowerCase","slice","list","filter","_c$name","_c$taxId","blob","name","taxId","includes","wrapRef","useRef","onDocClick","e","current","contains","target","document","addEventListener","removeEventListener","setAll","pick","ref","style","position","children","display","gap","alignItems","className","onFocus","onClick","title","length","map","LedgerList","rows","setRows","setLoading","error","setError","setQ","reportOpen","setReportOpen","reportType","setReportType","kpirMode","setKpirMode","kpirYear","setKpirYear","kpirMonth","setKpirMonth","kpirQuarter","setKpirQuarter","Math","floor","dateFrom","setDateFrom","setDate","toISOString","dateTo","setDateTo","includeIncome","setIncludeIncome","includeCost","setIncludeCost","setContractors","contractorsLoading","setContractorsLoading","contractorId","setContractorId","reportLoading","setReportLoading","reportError","setReportError","load","arr","normalized","console","loadContractors","_ref4","_c$taxId2","_objectSpread","tax_id","qq","r","_r$description","openReports","closeReports","handleDownloadKpir","payload","mode","year","month","quarter","_e$message","message","handleDownloadContractors","_e$message2","colSpan","idx","_ref5","_r$ledgerNumber","_r$ledgerNumber2","_r$type","_r$description2","stopPropagation","next","min","max","checked"],"sources":["/var/www/web-szyper/src/components/LedgerList.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport type { LedgerRow, ContractorRow } from \"../types\";\nimport { listContractors } from \"../contractorService\";\nimport { listLedger } from \"../documentService\";\nimport \"./_ledgerList.css\";\nimport { downloadKpirPdf, downloadContractorsXlsx } from \"../reportService\";\n\nfunction formatDatePL(value?: string | null): string {\n    if (!value) return \"—\";\n\n    const d = new Date(value);\n    if (Number.isNaN(d.getTime())) return value;\n\n    const dd = String(d.getDate()).padStart(2, \"0\");\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n    const yyyy = d.getFullYear();\n\n    return `${dd}.${mm}.${yyyy}`;\n}\n\nfunction toFiniteNumberOrNull(v: any): number | null {\n    if (v === null || v === undefined || v === \"\") return null;\n    const n = Number(v);\n    return Number.isFinite(n) ? n : null;\n}\n\nfunction formatMoney(v: any): string {\n    const n = toFiniteNumberOrNull(v);\n    return n === null ? \"—\" : n.toFixed(2);\n}\n\nfunction unwrapArray<T>(res: any): T[] {\n    if (Array.isArray(res)) return res;\n    if (Array.isArray(res?.data)) return res.data;\n    if (Array.isArray(res?.items)) return res.items;\n    return [];\n}\n\nfunction normalizeLedgerRow(raw: any): LedgerRow & { id?: number } {\n    return {\n        id: raw?.id ?? raw?.document_id ?? undefined,\n        ledgerNumber: raw?.ledgerNumber ?? raw?.ledger_number ?? null,\n        eventDate: raw?.eventDate ?? raw?.event_date ?? null,\n        type: raw?.type,\n        description: raw?.description ?? null,\n        netAmount: (toFiniteNumberOrNull(raw?.netAmount ?? raw?.net_amount) ?? null) as any,\n        grossAmount: (toFiniteNumberOrNull(raw?.grossAmount ?? raw?.gross_amount) ?? null) as any,\n    } as any;\n}\n\ntype ContractorOption = ContractorRow & { taxId?: string | null };\n\nfunction ContractorCombobox(props: {\n    contractors: ContractorOption[];\n    value: number | null;\n    onChange: (id: number | null) => void;\n    disabled?: boolean;\n    loading?: boolean;\n    placeholder?: string;\n}) {\n    const { contractors, value, onChange, disabled, loading, placeholder } = props;\n\n    const selected = value ? contractors.find((c) => c.id === value) : null;\n\n    const [open, setOpen] = React.useState(false);\n    const [query, setQuery] = React.useState(\"\");\n\n    const filtered = React.useMemo(() => {\n        const q = query.trim().toLowerCase();\n        if (!q) return contractors.slice(0, 200);\n        const list = contractors.filter((c) => {\n            const blob = `${c.name ?? \"\"} ${c.taxId ?? \"\"}`.toLowerCase();\n            return blob.includes(q);\n        });\n        return list.slice(0, 200);\n    }, [contractors, query]);\n\n    const wrapRef = React.useRef<HTMLDivElement | null>(null);\n    React.useEffect(() => {\n        const onDocClick = (e: MouseEvent) => {\n            if (!wrapRef.current) return;\n            if (!wrapRef.current.contains(e.target as Node)) setOpen(false);\n        };\n        document.addEventListener(\"mousedown\", onDocClick);\n        return () => document.removeEventListener(\"mousedown\", onDocClick);\n    }, []);\n\n    const setAll = () => {\n        onChange(null);\n        setQuery(\"\");\n        setOpen(false);\n    };\n\n    const pick = (id: number) => {\n        onChange(id);\n        setQuery(\"\");\n        setOpen(false);\n    };\n\n    return (\n        <div ref={wrapRef} style={{ position: \"relative\" }}>\n            <div style={{ display: \"grid\", gap: 6 }}>\n                <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n                    <input\n                        className=\"ledger-input\"\n                        value={\n                            open\n                                ? query\n                                : selected\n                                    ? `${selected.name}${selected.taxId ? ` (${selected.taxId})` : \"\"}`\n                                    : \"\"\n                        }\n                        placeholder={placeholder ?? \"Szukaj kontrahenta (nazwa/NIP) lub zostaw puste = wszyscy\"}\n                        onChange={(e) => {\n                            setQuery(e.target.value);\n                            if (!open) setOpen(true);\n                        }}\n                        onFocus={() => setOpen(true)}\n                        disabled={disabled}\n                        aria-label=\"Kontrahent\"\n                    />\n\n                    <button\n                        className=\"ledger-btn ledger-btn--ghost\"\n                        type=\"button\"\n                        onClick={() => (open ? setOpen(false) : setOpen(true))}\n                        disabled={disabled}\n                        title=\"Pokaż listę\"\n                    >\n                        ▾\n                    </button>\n\n                    <button\n                        className={`ledger-btn ledger-btn--ghost ${value === null ? \"ledger-btn--active\" : \"\"}`}\n                        type=\"button\"\n                        onClick={setAll}\n                        disabled={disabled}\n                        title=\"Wszyscy kontrahenci\"\n                    >\n                        Wszyscy\n                    </button>\n                </div>\n\n                {loading && <div className=\"ledger-hint\">Ładowanie kontrahentów…</div>}\n            </div>\n\n            {open && !disabled && (\n                <div className=\"ledger-combo\">\n                    <button\n                        type=\"button\"\n                        className=\"ledger-combo-item ledger-combo-item--all\"\n                        onClick={setAll}\n                    >\n                        Wszyscy kontrahenci\n                    </button>\n\n                    {filtered.length === 0 ? (\n                        <div className=\"ledger-combo-empty\">Brak wyników.</div>\n                    ) : (\n                        filtered.map((c) => (\n                            <button\n                                key={c.id}\n                                type=\"button\"\n                                className=\"ledger-combo-item\"\n                                onClick={() => pick(c.id)}\n                            >\n                                <div className=\"ledger-combo-name\">{c.name}</div>\n                                <div className=\"ledger-combo-sub\">\n                                    {c.taxId ? `NIP: ${c.taxId}` : \"NIP: —\"}\n                                </div>\n                            </button>\n                        ))\n                    )}\n\n                    {contractors.length > 200 && query.trim() === \"\" && (\n                        <div className=\"ledger-combo-hint\">\n                            Pokazuję pierwsze 200. Zacznij pisać, aby zawęzić listę.\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport const LedgerList: React.FC = () => {\n    const [rows, setRows] = useState<LedgerRow[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [q, setQ] = useState(\"\");\n\n    const [reportOpen, setReportOpen] = useState(false);\n    const [reportType, setReportType] = useState<\"kpir\" | \"contractors\">(\"kpir\");\n\n    const [kpirMode, setKpirMode] = useState<\"month\" | \"quarter\" | \"year\">(\"month\");\n    const [kpirYear, setKpirYear] = useState<number>(new Date().getFullYear());\n    const [kpirMonth, setKpirMonth] = useState<number>(new Date().getMonth() + 1);\n    const [kpirQuarter, setKpirQuarter] = useState<number>(Math.floor(new Date().getMonth() / 3) + 1);\n\n    const [dateFrom, setDateFrom] = useState<string>(() => {\n        const d = new Date();\n        d.setDate(1);\n        return d.toISOString().slice(0, 10);\n    });\n    const [dateTo, setDateTo] = useState<string>(() => new Date().toISOString().slice(0, 10));\n    const [includeIncome, setIncludeIncome] = useState(true);\n    const [includeCost, setIncludeCost] = useState(true);\n\n    const [contractors, setContractors] = useState<ContractorRow[]>([]);\n    const [contractorsLoading, setContractorsLoading] = useState(false);\n    const [contractorId, setContractorId] = useState<number | null>(null);\n\n    const [reportLoading, setReportLoading] = useState(false);\n    const [reportError, setReportError] = useState<string | null>(null);\n\n    const load = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const res: any = await listLedger();\n\n            const arr = unwrapArray<any>(res);\n            const normalized = arr.map(normalizeLedgerRow);\n\n            setRows(normalized as any);\n        } catch (e) {\n            console.error(e);\n            setError(\"Nie udało się pobrać księgi (zaksięgowanych dokumentów).\");\n            setRows([]);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const loadContractors = async () => {\n        setContractorsLoading(true);\n        try {\n            const res: any = await listContractors();\n            const arr = unwrapArray<any>(res);\n\n            const normalized = arr.map((c: any) => ({\n                ...c,\n                taxId: c?.taxId ?? c?.tax_id ?? null,\n            }));\n\n            setContractors(normalized);\n        } catch (e) {\n            console.error(e);\n            setReportError(\"Nie udało się pobrać listy kontrahentów.\");\n            setContractors([]);\n        } finally {\n            setContractorsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        load();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (!reportOpen) return;\n        if (reportType !== \"contractors\") return;\n\n        loadContractors();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [reportOpen, reportType]);\n\n    const filtered = useMemo(() => {\n        const qq = q.trim().toLowerCase();\n        if (!qq) return rows;\n        return rows.filter((r: any) => (r.description ?? \"\").toLowerCase().includes(qq));\n    }, [rows, q]);\n\n    const openReports = () => {\n        setReportError(null);\n        setReportOpen(true);\n    };\n\n    const closeReports = () => {\n        if (reportLoading) return;\n        setReportOpen(false);\n    };\n\n    const handleDownloadKpir = async () => {\n        setReportError(null);\n        setReportLoading(true);\n\n        try {\n            const payload =\n                kpirMode === \"month\"\n                    ? { mode: \"month\", year: kpirYear, month: kpirMonth }\n                    : kpirMode === \"quarter\"\n                        ? { mode: \"quarter\", year: kpirYear, quarter: kpirQuarter }\n                        : { mode: \"year\", year: kpirYear };\n\n            await downloadKpirPdf(payload as any);\n            setReportOpen(false);\n        } catch (e: any) {\n            setReportError(e?.message ?? \"Nie udało się wygenerować raportu.\");\n        } finally {\n            setReportLoading(false);\n        }\n    };\n\n    const handleDownloadContractors = async () => {\n        setReportError(null);\n\n        if (!includeIncome && !includeCost) {\n            setReportError(\"Wybierz przynajmniej: Przychody albo Koszty.\");\n            return;\n        }\n        if (!dateFrom || !dateTo) {\n            setReportError(\"Wybierz zakres dat.\");\n            return;\n        }\n\n        setReportLoading(true);\n        try {\n            await downloadContractorsXlsx({\n                dateFrom,\n                dateTo,\n                includeIncome,\n                includeCost,\n                contractorId,\n            } as any);\n\n            setReportOpen(false);\n        } catch (e: any) {\n            setReportError(e?.message ?? \"Nie udało się wygenerować raportu.\");\n        } finally {\n            setReportLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"ledger-card\">\n            <div className=\"ledger-header\">\n                <div>\n                    <h2>Księga</h2>\n                    <p>Zaksięgowane dokumenty (BOOKED) z numerem ewidencyjnym.</p>\n                </div>\n\n                <div className=\"ledger-toolbar\">\n                    <input\n                        className=\"ledger-input\"\n                        placeholder=\"Szukaj w opisie…\"\n                        value={q}\n                        onChange={(e) => setQ(e.target.value)}\n                    />\n\n                    <button\n                        className=\"ledger-btn ledger-btn--primary\"\n                        type=\"button\"\n                        onClick={openReports}\n                        disabled={loading}\n                    >\n                        Raporty\n                    </button>\n\n                    <button className=\"ledger-btn ledger-btn--ghost\" type=\"button\" onClick={load} disabled={loading}>\n                        Odśwież\n                    </button>\n                </div>\n            </div>\n\n            {loading && <div className=\"ledger-info\">Ładowanie…</div>}\n            {error && <div className=\"ledger-error\">{error}</div>}\n\n            {!loading && !error && (\n                <div className=\"ledger-tablewrap\">\n                    <table className=\"ledger-table\">\n                        <thead>\n                        <tr>\n                            <th>Nr ewid.</th>\n                            <th>Data zdarzenia</th>\n                            <th>Typ</th>\n                            <th>Opis</th>\n                            <th className=\"ledger-th-right\">Netto</th>\n                            <th className=\"ledger-th-right\">Brutto</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {filtered.length === 0 ? (\n                            <tr>\n                                <td colSpan={6} className=\"ledger-empty\">\n                                    Brak pozycji w księdze.\n                                </td>\n                            </tr>\n                        ) : (\n                            filtered.map((r: any, idx: number) => (\n                                <tr key={r.ledgerNumber ?? r.id ?? idx}>\n                                    <td>{r.ledgerNumber ?? \"—\"}</td>\n                                    <td>{formatDatePL(r.eventDate)}</td>\n                                    <td>{r.type === \"INCOME\" ? \"Przychód\" : r.type === \"COST\" ? \"Koszt\" : (r.type ?? \"—\")}</td>\n                                    <td>{r.description ?? \"—\"}</td>\n                                    <td className=\"ledger-td-right\">{formatMoney(r.netAmount)}</td>\n                                    <td className=\"ledger-td-right\">{formatMoney(r.grossAmount)}</td>\n                                </tr>\n                            ))\n                        )}\n                        </tbody>\n                    </table>\n                </div>\n            )}\n\n            {reportOpen && (\n                <div className=\"ledger-modal-backdrop\" onClick={closeReports}>\n                    <div className=\"ledger-modal\" onClick={(e) => e.stopPropagation()}>\n                        <div className=\"ledger-modal-head\">\n                            <h3>Generowanie raportu</h3>\n                            <button\n                                className=\"ledger-btn ledger-btn--ghost\"\n                                type=\"button\"\n                                onClick={closeReports}\n                                disabled={reportLoading}\n                            >\n                                ✕\n                            </button>\n                        </div>\n\n                        <div className=\"ledger-modal-body\">\n                            {reportError && (\n                                <div className=\"ledger-error ledger-error--scroll\">\n                                    <pre className=\"ledger-error-pre\">{reportError}</pre>\n                                </div>\n                            )}\n\n                            <label className=\"ledger-label\">\n                                Typ raportu\n                                <select\n                                    className=\"ledger-input\"\n                                    value={reportType}\n                                    onChange={(e) => {\n                                        const next = e.target.value as \"kpir\" | \"contractors\";\n                                        setReportType(next);\n                                        setReportError(null);\n                                        if (next === \"contractors\") {\n                                            loadContractors();\n                                        }\n                                    }}\n                                    disabled={reportLoading}\n                                >\n                                    <option value=\"kpir\">KPiR (PDF)</option>\n                                    <option value=\"contractors\">Raport kontrahenci (Excel)</option>\n                                </select>\n                            </label>\n\n                            {reportType === \"kpir\" ? (\n                                <div style={{ display: \"grid\", gap: 10 }}>\n                                    <label className=\"ledger-label\">\n                                        Okres\n                                        <select\n                                            className=\"ledger-input\"\n                                            value={kpirMode}\n                                            onChange={(e) => setKpirMode(e.target.value as any)}\n                                            disabled={reportLoading}\n                                        >\n                                            <option value=\"month\">Miesiąc</option>\n                                            <option value=\"quarter\">Kwartał</option>\n                                            <option value=\"year\">Rok</option>\n                                        </select>\n                                    </label>\n\n                                    <label className=\"ledger-label\">\n                                        Rok\n                                        <input\n                                            className=\"ledger-input\"\n                                            type=\"number\"\n                                            value={kpirYear}\n                                            onChange={(e) => setKpirYear(Number(e.target.value))}\n                                            min={2000}\n                                            max={2100}\n                                            disabled={reportLoading}\n                                        />\n                                    </label>\n\n                                    {kpirMode === \"month\" && (\n                                        <label className=\"ledger-label\">\n                                            Miesiąc\n                                            <input\n                                                className=\"ledger-input\"\n                                                type=\"number\"\n                                                value={kpirMonth}\n                                                onChange={(e) => setKpirMonth(Number(e.target.value))}\n                                                min={1}\n                                                max={12}\n                                                disabled={reportLoading}\n                                            />\n                                        </label>\n                                    )}\n\n                                    {kpirMode === \"quarter\" && (\n                                        <label className=\"ledger-label\">\n                                            Kwartał\n                                            <input\n                                                className=\"ledger-input\"\n                                                type=\"number\"\n                                                value={kpirQuarter}\n                                                onChange={(e) => setKpirQuarter(Number(e.target.value))}\n                                                min={1}\n                                                max={4}\n                                                disabled={reportLoading}\n                                            />\n                                        </label>\n                                    )}\n\n                                    <button\n                                        className=\"ledger-btn ledger-btn--primary\"\n                                        type=\"button\"\n                                        disabled={reportLoading}\n                                        onClick={handleDownloadKpir}\n                                    >\n                                        {reportLoading ? \"Generowanie…\" : \"Pobierz PDF\"}\n                                    </button>\n                                </div>\n                            ) : (\n                                <div style={{ display: \"grid\", gap: 10 }}>\n                                    <label className=\"ledger-label\">\n                                        Od\n                                        <input\n                                            className=\"ledger-input\"\n                                            type=\"date\"\n                                            value={dateFrom}\n                                            onChange={(e) => setDateFrom(e.target.value)}\n                                            disabled={reportLoading}\n                                        />\n                                    </label>\n\n                                    <label className=\"ledger-label\">\n                                        Do\n                                        <input\n                                            className=\"ledger-input\"\n                                            type=\"date\"\n                                            value={dateTo}\n                                            onChange={(e) => setDateTo(e.target.value)}\n                                            disabled={reportLoading}\n                                        />\n                                    </label>\n\n                                    <label className=\"ledger-label\">\n                                        Kontrahent\n                                        <ContractorCombobox\n                                            contractors={contractors as any}\n                                            value={contractorId}\n                                            onChange={setContractorId}\n                                            disabled={reportLoading}\n                                            loading={contractorsLoading}\n                                            placeholder=\"Szukaj (nazwa/NIP)… (puste = wszyscy)\"\n                                        />\n                                    </label>\n\n                                    <div className=\"checks\">\n                                        <label style={{ display: \"flex\", gap: 6, alignItems: \"center\" }}>\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={includeIncome}\n                                                onChange={(e) => setIncludeIncome(e.target.checked)}\n                                                disabled={reportLoading}\n                                            />\n                                            Przychody\n                                        </label>\n                                        <label style={{ display: \"flex\", gap: 6, alignItems: \"center\" }}>\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={includeCost}\n                                                onChange={(e) => setIncludeCost(e.target.checked)}\n                                                disabled={reportLoading}\n                                            />\n                                            Koszty\n                                        </label>\n                                    </div>\n\n                                    <button\n                                        className=\"ledger-btn ledger-btn--primary\"\n                                        type=\"button\"\n                                        disabled={reportLoading || (!includeIncome && !includeCost)}\n                                        onClick={handleDownloadContractors}\n                                    >\n                                        {reportLoading ? \"Generowanie…\" : \"Pobierz Excel\"}\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}