{"ast":null,"code":"// src/contractorService.ts\nimport{apiFetch}from\"./api\";function unwrapList(payload){if(Array.isArray(payload))return payload;if(payload&&Array.isArray(payload.data))return payload.data;if(payload&&Array.isArray(payload.items))return payload.items;if(payload&&Array.isArray(payload.rows))return payload.rows;console.warn(\"Expected array from API, got:\",payload);return[];}export async function listContractors(){const res=await apiFetch(\"/api/contractors\");return unwrapList(res);}export async function createContractor(payload){return apiFetch(\"/api/contractors\",{method:\"POST\",body:JSON.stringify(payload)});}export async function updateContractor(id,payload){return apiFetch(\"/api/contractors/\".concat(id),{method:\"PATCH\",body:JSON.stringify(payload)});}export async function deleteContractor(id){return apiFetch(\"/api/contractors/\".concat(id),{method:\"DELETE\"});}","map":{"version":3,"names":["apiFetch","unwrapList","payload","Array","isArray","data","items","rows","console","warn","listContractors","res","createContractor","method","body","JSON","stringify","updateContractor","id","concat","deleteContractor"],"sources":["/var/www/web-szyper/src/contractorService.ts"],"sourcesContent":["// src/contractorService.ts\nimport { apiFetch } from \"./api\";\nimport type { ContractorRow } from \"./types\";\n\nexport type ContractorCreateRequest = {\n    name: string;\n    taxId?: string | null;\n    address?: string | null;\n};\n\nexport type ContractorUpdateRequest = Partial<ContractorCreateRequest>;\n\nfunction unwrapList<T>(payload: any): T[] {\n    if (Array.isArray(payload)) return payload;\n\n    if (payload && Array.isArray(payload.data)) return payload.data;\n    if (payload && Array.isArray(payload.items)) return payload.items;\n    if (payload && Array.isArray(payload.rows)) return payload.rows;\n\n    console.warn(\"Expected array from API, got:\", payload);\n    return [];\n}\n\nexport async function listContractors(): Promise<ContractorRow[]> {\n    const res = await apiFetch<any>(\"/api/contractors\");\n    return unwrapList<ContractorRow>(res);\n}\n\nexport async function createContractor(payload: ContractorCreateRequest): Promise<{ id: number }> {\n    return apiFetch<{ id: number }>(\"/api/contractors\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n    });\n}\n\nexport async function updateContractor(id: number, payload: ContractorUpdateRequest): Promise<{ id: number }> {\n    return apiFetch<{ id: number }>(`/api/contractors/${id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify(payload),\n    });\n}\n\nexport async function deleteContractor(id: number): Promise<void> {\n    return apiFetch<void>(`/api/contractors/${id}`, { method: \"DELETE\" });\n}"],"mappings":"AAAA;AACA,OAASA,QAAQ,KAAQ,OAAO,CAWhC,QAAS,CAAAC,UAAUA,CAAIC,OAAY,CAAO,CACtC,GAAIC,KAAK,CAACC,OAAO,CAACF,OAAO,CAAC,CAAE,MAAO,CAAAA,OAAO,CAE1C,GAAIA,OAAO,EAAIC,KAAK,CAACC,OAAO,CAACF,OAAO,CAACG,IAAI,CAAC,CAAE,MAAO,CAAAH,OAAO,CAACG,IAAI,CAC/D,GAAIH,OAAO,EAAIC,KAAK,CAACC,OAAO,CAACF,OAAO,CAACI,KAAK,CAAC,CAAE,MAAO,CAAAJ,OAAO,CAACI,KAAK,CACjE,GAAIJ,OAAO,EAAIC,KAAK,CAACC,OAAO,CAACF,OAAO,CAACK,IAAI,CAAC,CAAE,MAAO,CAAAL,OAAO,CAACK,IAAI,CAE/DC,OAAO,CAACC,IAAI,CAAC,+BAA+B,CAAEP,OAAO,CAAC,CACtD,MAAO,EAAE,CACb,CAEA,MAAO,eAAe,CAAAQ,eAAeA,CAAA,CAA6B,CAC9D,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,QAAQ,CAAM,kBAAkB,CAAC,CACnD,MAAO,CAAAC,UAAU,CAAgBU,GAAG,CAAC,CACzC,CAEA,MAAO,eAAe,CAAAC,gBAAgBA,CAACV,OAAgC,CAA2B,CAC9F,MAAO,CAAAF,QAAQ,CAAiB,kBAAkB,CAAE,CAChDa,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACd,OAAO,CAChC,CAAC,CAAC,CACN,CAEA,MAAO,eAAe,CAAAe,gBAAgBA,CAACC,EAAU,CAAEhB,OAAgC,CAA2B,CAC1G,MAAO,CAAAF,QAAQ,qBAAAmB,MAAA,CAAqCD,EAAE,EAAI,CACtDL,MAAM,CAAE,OAAO,CACfC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACd,OAAO,CAChC,CAAC,CAAC,CACN,CAEA,MAAO,eAAe,CAAAkB,gBAAgBA,CAACF,EAAU,CAAiB,CAC9D,MAAO,CAAAlB,QAAQ,qBAAAmB,MAAA,CAA2BD,EAAE,EAAI,CAAEL,MAAM,CAAE,QAAS,CAAC,CAAC,CACzE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}