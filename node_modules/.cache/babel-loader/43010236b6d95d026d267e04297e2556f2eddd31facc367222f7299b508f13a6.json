{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import\"./_companyList.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getErrorMessage(err){var _anyErr$response,_anyErr$response$data;const anyErr=err;if(typeof(anyErr===null||anyErr===void 0?void 0:anyErr.message)===\"string\"&&anyErr.message.trim())return anyErr.message;const msg=anyErr===null||anyErr===void 0?void 0:(_anyErr$response=anyErr.response)===null||_anyErr$response===void 0?void 0:(_anyErr$response$data=_anyErr$response.data)===null||_anyErr$response$data===void 0?void 0:_anyErr$response$data.message;if(typeof msg===\"string\"&&msg.trim())return msg;try{return JSON.stringify(anyErr);}catch(_unused){return\"Operacja nie powiodła się.\";}}export const ConfirmDialog=_ref=>{let{title,description,confirmText=\"Potwierdź\",cancelText=\"Anuluj\",danger=false,onConfirm,onCancel}=_ref;const[isSubmitting,setIsSubmitting]=useState(false);const[error,setError]=useState(null);const timerRef=useRef(null);const clearTimer=()=>{if(timerRef.current){window.clearTimeout(timerRef.current);timerRef.current=null;}};const showErrorFor7s=msg=>{setError(msg);clearTimer();timerRef.current=window.setTimeout(()=>{setError(null);timerRef.current=null;},7000);};useEffect(()=>{const onKeyDown=e=>{if(e.key===\"Escape\")onCancel();};window.addEventListener(\"keydown\",onKeyDown);return()=>{window.removeEventListener(\"keydown\",onKeyDown);clearTimer();};},[onCancel]);const handleConfirm=async()=>{setError(null);setIsSubmitting(true);try{await onConfirm();onCancel();}catch(err){showErrorFor7s(getErrorMessage(err));}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"company-modal-backdrop\",onMouseDown:onCancel,children:/*#__PURE__*/_jsxs(\"div\",{className:\"company-modal\",onMouseDown:e=>e.stopPropagation(),role:\"dialog\",\"aria-modal\":\"true\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"company-modal-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"company-modal-title\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"company-modal-subtitle\",children:description})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"company-btn company-btn--ghost\",onClick:onCancel,children:\"Zamknij\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"company-inline-error\",style:{margin:\"0 0 12px 0\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"company-modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"company-btn company-btn--ghost\",onClick:onCancel,children:cancelText}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"company-btn \".concat(danger?\"company-btn--danger\":\"company-btn--primary\"),onClick:handleConfirm,disabled:isSubmitting,children:isSubmitting?\"Przetwarzanie...\":confirmText})]})]})});};","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","getErrorMessage","err","_anyErr$response","_anyErr$response$data","anyErr","message","trim","msg","response","data","JSON","stringify","_unused","ConfirmDialog","_ref","title","description","confirmText","cancelText","danger","onConfirm","onCancel","isSubmitting","setIsSubmitting","error","setError","timerRef","clearTimer","current","window","clearTimeout","showErrorFor7s","setTimeout","onKeyDown","e","key","addEventListener","removeEventListener","handleConfirm","className","onMouseDown","children","stopPropagation","role","type","onClick","style","margin","concat","disabled"],"sources":["/var/www/web-szyper/src/components/ConfirmDialog.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./_companyList.css\";\n\ninterface ConfirmDialogProps {\n    title: string;\n    description: string;\n    confirmText?: string;\n    cancelText?: string;\n    danger?: boolean;\n\n    onConfirm: () => Promise<void> | void;\n    onCancel: () => void;\n}\n\nfunction getErrorMessage(err: unknown): string {\n    const anyErr = err as any;\n\n    if (typeof anyErr?.message === \"string\" && anyErr.message.trim()) return anyErr.message;\n\n    const msg = anyErr?.response?.data?.message;\n    if (typeof msg === \"string\" && msg.trim()) return msg;\n\n    try {\n        return JSON.stringify(anyErr);\n    } catch {\n        return \"Operacja nie powiodła się.\";\n    }\n}\n\nexport const ConfirmDialog: React.FC<ConfirmDialogProps> = ({\n                                                                title,\n                                                                description,\n                                                                confirmText = \"Potwierdź\",\n                                                                cancelText = \"Anuluj\",\n                                                                danger = false,\n                                                                onConfirm,\n                                                                onCancel,\n                                                            }) => {\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const timerRef = useRef<number | null>(null);\n\n    const clearTimer = () => {\n        if (timerRef.current) {\n            window.clearTimeout(timerRef.current);\n            timerRef.current = null;\n        }\n    };\n\n    const showErrorFor7s = (msg: string) => {\n        setError(msg);\n        clearTimer();\n        timerRef.current = window.setTimeout(() => {\n            setError(null);\n            timerRef.current = null;\n        }, 7000);\n    };\n\n    useEffect(() => {\n        const onKeyDown = (e: KeyboardEvent) => {\n            if (e.key === \"Escape\") onCancel();\n        };\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => {\n            window.removeEventListener(\"keydown\", onKeyDown);\n            clearTimer();\n        };\n    }, [onCancel]);\n\n    const handleConfirm = async () => {\n        setError(null);\n        setIsSubmitting(true);\n\n        try {\n            await onConfirm();\n            onCancel();\n        } catch (err) {\n            showErrorFor7s(getErrorMessage(err));\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <div className=\"company-modal-backdrop\" onMouseDown={onCancel}>\n            <div\n                className=\"company-modal\"\n                onMouseDown={(e) => e.stopPropagation()}\n                role=\"dialog\"\n                aria-modal=\"true\"\n            >\n                <div className=\"company-modal-header\">\n                    <div>\n                        <h3 className=\"company-modal-title\">{title}</h3>\n                        <p className=\"company-modal-subtitle\">{description}</p>\n                    </div>\n\n                    <button type=\"button\" className=\"company-btn company-btn--ghost\" onClick={onCancel}>\n                        Zamknij\n                    </button>\n                </div>\n\n                {error && (\n                    <div className=\"company-inline-error\" style={{ margin: \"0 0 12px 0\" }}>\n                        {error}\n                    </div>\n                )}\n\n                <div className=\"company-modal-footer\">\n                    <button\n                        type=\"button\"\n                        className=\"company-btn company-btn--ghost\"\n                        onClick={onCancel}\n                    >\n                        {cancelText}\n                    </button>\n\n                    <button\n                        type=\"button\"\n                        className={`company-btn ${danger ? \"company-btn--danger\" : \"company-btn--primary\"}`}\n                        onClick={handleConfirm}\n                        disabled={isSubmitting}\n                    >\n                        {isSubmitting ? \"Przetwarzanie...\" : confirmText}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}